# 我的发布页面设计文档

## 📋 页面概述

**页面名称**：我的发布  
**路由**：`/pages/user-center/publish-list`  
**功能**：管理用户发布的所有内容（房源、活动、技能、交流贴）  
**优先级**：⭐⭐⭐ 核心功能  

---

## 🎯 功能需求

### 核心功能

1. **发布内容列表展示**
   - 显示所有发布内容
   - 支持按类型筛选
   - 支持按状态筛选
   - 支持下拉刷新
   - 支持上拉加载

2. **发布内容操作**
   - 查看发布详情
   - 编辑发布内容
   - 发布内容
   - 下架内容
   - 删除内容
   - 查看统计数据

3. **发布状态管理**
   - 草稿
   - 已发布
   - 已下架
   - 已删除

4. **发布类型**
   - 房源
   - 活动
   - 技能
   - 交流贴

5. **统计数据**
   - 浏览数
   - 点赞数
   - 评论数

---

## 📐 页面布局

### 整体结构

```
┌─────────────────────────────────┐
│ ← 返回    我的发布          [+] │  ← 页面头部
├─────────────────────────────────┤
│                                 │
│  发布卡片 1                     │
│  ┌─────────────────────────────┐│
│  │ [图]  标题          [状态]  ││
│  │ 100x │  描述...              ││
│  │ 100  │  👁️浏览 ❤️点赞 💬评论 ││
│  │      │              [操作]  ││
│  └─────────────────────────────┘│
│                                 │
│  发布卡片 2                     │
│  ...                            │
│                                 │
│  [加载更多]                     │
│                                 │
└─────────────────────────────────┘
```

### 页面头部

**高度**：56px  
**背景**：白色 `#FFFFFF`  
**阴影**：中阴影  

**组件**：
- 返回按钮（左侧）：`←`
- 页面标题（中间）：`我的发布`
- 新建按钮（右侧）：`+`（圆形按钮）

### 页面内容区

**高度**：自适应  
**背景**：浅灰色 `#F5F5F5`  
**内边距**：16px  
**间距**：8px

**特点**：
- 直接显示发布列表
- 无需 Tabs 切换
- 简洁的菜单式布局

### 发布卡片

**布局**：左图右文

```
┌─────────────────────────────────┐
│ [图]  标题              [状态]  │
│ 100x │  描述信息...              │
│ 100  │  👁️浏览 ❤️点赞 💬评论    │
│      │                  [操作]  │
└─────────────────────────────────┘
```

**尺寸**：
- 卡片高度：140px
- 图片宽度：100px
- 图片高度：100px
- 圆角：12px
- 阴影：中阴影
- 间距：12px

**内容**：
- 标题：18px 600 深灰色
- 描述：14px 400 中灰色
- 统计：12px 400 中灰色
- 状态标签：12px 600 白色

**状态标签颜色**：
- 草稿：灰色背景 `#E0E0E0` + 深灰文字
- 已发布：绿色背景 `#D4EDDA` + 深绿文字
- 已下架：黄色背景 `#FFF3CD` + 深黄文字
- 已删除：红色背景 `#F8D7DA` + 深红文字

### 操作按钮

**位置**：卡片右下角  
**样式**：
- 编辑：绿色按钮
- 下架：黄色按钮
- 删除：红色按钮

**尺寸**：
- 宽度：60px
- 高度：32px
- 字体：12px

### 空状态

```
        📝
      暂无发布
    [发布新内容]
```

**组件**：
- 图标：48px emoji
- 文字：14px 中灰色
- 按钮：绿色按钮

---

## 🔄 交互流程

### 页面加载

```
页面打开
    ↓
加载发布列表
    ↓
显示发布卡片
    ↓
页面就绪
```

### 发布内容

```
点击新建按钮
    ↓
打开发布编辑页
    ↓
用户填写信息
    ↓
点击发布
    ↓
显示成功提示
    ↓
返回发布列表
```

### 编辑发布

```
点击编辑按钮
    ↓
打开编辑页
    ↓
显示当前内容
    ↓
用户修改信息
    ↓
点击保存
    ↓
显示成功提示
    ↓
返回发布列表
```

### 下架发布

```
点击下架按钮
    ↓
显示确认对话框
    ↓
用户确认
    ↓
执行下架操作
    ↓
显示成功提示
    ↓
更新卡片状态
```

### 删除发布

```
点击删除按钮
    ↓
显示确认对话框
    ↓
用户确认
    ↓
执行删除操作
    ↓
显示成功提示
    ↓
从列表中移除
```

---

## 📊 数据结构

### 发布对象

```typescript
interface Publish {
  id: string                    // 发布 ID
  title: string                 // 发布标题
  description: string           // 发布描述
  image: string                 // 发布图片 URL
  status: 'draft' | 'published' | 'offline' | 'deleted'
  type: 'house' | 'activity' | 'skill' | 'discussion'
  views: number                 // 浏览数
  likes: number                 // 点赞数
  comments: number              // 评论数
  createTime: string            // 创建时间 (YYYY-MM-DD)
  updateTime: string            // 更新时间
  actions: string[]             // 可用操作列表
}
```

### Mock 数据示例

```typescript
const mockPublishes = [
  {
    id: '1',
    title: '乡村民宿出租',
    description: '山区民宿，环境优美，设施齐全',
    image: 'https://example.com/house.jpg',
    status: 'published',
    type: 'house',
    views: 234,
    likes: 45,
    comments: 12,
    createTime: '2024-02-10',
    updateTime: '2024-02-10',
    actions: ['edit', 'offline', 'delete']
  },
  {
    id: '2',
    title: '手工艺体验课程',
    description: '学习传统陶艺制作技巧',
    image: 'https://example.com/activity.jpg',
    status: 'published',
    type: 'activity',
    views: 156,
    likes: 32,
    comments: 8,
    createTime: '2024-02-08',
    updateTime: '2024-02-08',
    actions: ['edit', 'offline', 'delete']
  },
  {
    id: '3',
    title: '新的发布',
    description: '这是一个草稿',
    image: 'https://example.com/draft.jpg',
    status: 'draft',
    type: 'discussion',
    views: 0,
    likes: 0,
    comments: 0,
    createTime: '2024-02-12',
    updateTime: '2024-02-12',
    actions: ['edit', 'publish', 'delete']
  }
]
```

---

## 🎨 样式规范

### 颜色

| 元素 | 颜色 | 用途 |
|------|------|------|
| 背景 | `#F5F5F5` | 页面背景 |
| 卡片 | `#FFFFFF` | 发布卡片 |
| 标题 | `#212121` | 发布标题 |
| 描述 | `#757575` | 发布描述 |
| 统计 | `#BDBDBD` | 统计数据 |
| 草稿 | `#E0E0E0` | 草稿状态 |
| 已发布 | `#D4EDDA` | 已发布状态 |
| 已下架 | `#FFF3CD` | 已下架状态 |
| 已删除 | `#F8D7DA` | 已删除状态 |

### 间距

```
页面内边距：16px
卡片间距：12px
卡片内边距：12px
Tabs 间距：8px
```

### 圆角

```
Tabs：8px
卡片：12px
按钮：8px
图片：8px
```

---

## 🔧 技术实现

### 状态管理

```typescript
// 页面状态
const publishList = ref<Publish[]>([]) // 发布列表
const loading = ref(false)             // 加载状态
const refreshing = ref(false)          // 刷新状态
const hasMore = ref(true)              // 是否有更多数据
const page = ref(1)                    // 当前页码
```

### 计算属性

```typescript


// 状态标签
const statusLabel = (status: string) => {
  const labels: Record<string, string> = {
    draft: '草稿',
    published: '已发布',
    offline: '已下架',
    deleted: '已删除'
  }
  return labels[status] || status
}
```

### 方法

```typescript
// 加载发布列表
const loadPublishes = async () => {
  loading.value = true
  try {
    // 模拟 API 调用
    await new Promise(resolve => setTimeout(resolve, 500))
    publishList.value = mockPublishes
  } finally {
    loading.value = false
  }
}

// 新建发布
const createPublish = () => {
  if (typeof uni === 'undefined') {
    alert('发布编辑页面')
  } else {
    uni.navigateTo({
      url: '/pages/user-center/publish-edit'
    })
  }
}

// 编辑发布
const editPublish = (publishId: string) => {
  if (typeof uni === 'undefined') {
    alert(`编辑发布: ${publishId}`)
  } else {
    uni.navigateTo({
      url: `/pages/user-center/publish-edit?id=${publishId}`
    })
  }
}

// 下架发布
const offlinePublish = (publishId: string) => {
  if (typeof uni === 'undefined') {
    if (confirm('确定要下架这个发布吗？')) {
      alert('已下架')
    }
  } else {
    uni.showModal({
      title: '下架发布',
      content: '确定要下架这个发布吗？',
      success: (res) => {
        if (res.confirm) {
          uni.showToast({ title: '已下架', icon: 'success' })
        }
      }
    })
  }
}

// 删除发布
const deletePublish = (publishId: string) => {
  if (typeof uni === 'undefined') {
    if (confirm('确定要删除这个发布吗？')) {
      alert('已删除')
    }
  } else {
    uni.showModal({
      title: '删除发布',
      content: '确定要删除这个发布吗？',
      success: (res) => {
        if (res.confirm) {
          uni.showToast({ title: '已删除', icon: 'success' })
        }
      }
    })
  }
}

// 返回
const goBack = () => {
  if (typeof uni === 'undefined') {
    window.history.back()
  } else {
    uni.navigateBack()
  }
}
```

---

## 📱 响应式设计

### 小屏幕（< 576px）

- 卡片高度：120px
- 图片尺寸：80x80
- 字体缩小 10%
- 间距缩小 10%

### 中屏幕（576px - 768px）

- 卡片高度：140px
- 图片尺寸：100x100
- 标准字体
- 标准间距

### 大屏幕（> 768px）

- 卡片高度：160px
- 图片尺寸：120x120
- 字体放大 10%
- 间距放大 10%

---

## 🧪 测试清单

### 功能测试

- [ ] 页面加载正常
- [ ] 发布列表显示正确
- [ ] Tabs 切换正常
- [ ] 下拉刷新正常
- [ ] 上拉加载正常
- [ ] 新建发布正常
- [ ] 编辑发布正常
- [ ] 下架发布正常
- [ ] 删除发布正常
- [ ] 空状态显示正确

### 界面测试

- [ ] 布局美观
- [ ] 文字清晰
- [ ] 颜色搭配
- [ ] 间距合理
- [ ] 卡片显示完整
- [ ] 状态标签清晰
- [ ] 统计数据显示

### 交互测试

- [ ] 返回按钮正常
- [ ] 新建按钮正常
- [ ] Tab 切换流畅
- [ ] 卡片点击响应
- [ ] 操作按钮响应
- [ ] 加载动画显示

### 兼容性测试

- [ ] 浏览器环境
- [ ] uni-app 环境
- [ ] 微信小程序
- [ ] 不同屏幕尺寸

---

## 📝 开发检查清单

- [ ] 页面结构完整
- [ ] 样式规范统一
- [ ] 数据绑定正确
- [ ] 交互流程清晰
- [ ] 错误处理完善
- [ ] 加载状态处理
- [ ] 空状态处理
- [ ] 响应式适配
- [ ] 代码注释完整
- [ ] 文档更新完整

---

**文档版本**：1.0.0  
**最后更新**：2026-02-12  
**维护者**：Kiro AI Assistant
