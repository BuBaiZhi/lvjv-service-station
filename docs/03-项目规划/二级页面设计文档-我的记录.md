# 我的记录页面设计文档

## 📋 页面概述

**页面名称**：我的记录  
**路由**：`/pages/user-center/history-list`  
**功能**：管理用户的浏览历史和收藏内容  
**优先级**：⭐⭐ 辅助功能  

---

## 🎯 功能需求

### 核心功能

1. **浏览历史管理**
   - 显示浏览历史列表
   - 支持删除单条历史
   - 支持清空所有历史
   - 显示浏览时间

2. **收藏管理**
   - 显示收藏内容列表
   - 支持删除单条收藏
   - 支持清空所有收藏
   - 显示收藏时间

3. **记录操作**
   - 点击记录项跳转到详情页
   - 删除单条记录
   - 清空所有记录
   - 显示记录统计

4. **记录展示**
   - 显示内容标题
   - 显示内容图片
   - 显示时间
   - 显示内容类型

---

## 📐 页面布局

### 整体结构

```
┌─────────────────────────────────┐
│ ← 返回    我的记录          [清空]│  ← 页面头部
├─────────────────────────────────┤
│ [浏览历史] [收藏]               │  ← Tabs 切换
├─────────────────────────────────┤
│                                 │
│  记录 1                         │
│  ┌─────────────────────────────┐│
│  │ [图]  标题          [删除]  ││
│  │ 80x  2024-02-10              ││
│  │ 80                           ││
│  └─────────────────────────────┘│
│                                 │
│  记录 2                         │
│  ...                            │
│                                 │
│  [加载更多]                     │
│                                 │
└─────────────────────────────────┘
```

### 页面头部

**高度**：56px  
**背景**：白色 `#FFFFFF`  
**阴影**：中阴影  

**组件**：
- 返回按钮（左侧）：`←`
- 页面标题（中间）：`我的记录`
- 清空按钮（右侧）：`清空`（文字按钮）

### Tabs 切换

**高度**：48px  
**背景**：白色 `#FFFFFF`  
**样式**：
- 选中：绿色背景 `#4CAF50` + 白色文字
- 未选中：浅灰背景 `#F5F5F5` + 深灰文字
- 圆角：8px
- 间距：8px

**选项**：
1. 浏览历史
2. 收藏

### 记录卡片

**布局**：左图右文

```
┌─────────────────────────────────┐
│ [图]  标题              [删除]  │
│ 80x  2024-02-10                 │
│ 80                              │
└─────────────────────────────────┘
```

**尺寸**：
- 卡片高度：100px
- 图片宽度：80px
- 图片高度：80px
- 圆角：8px
- 阴影：浅阴影
- 间距：12px

**内容**：
- 标题：16px 600 深灰色
- 时间：12px 400 浅灰色
- 删除按钮：12px 400 红色

### 空状态

```
        📋
      暂无记录
    [返回首页]
```

**组件**：
- 图标：48px emoji
- 文字：14px 中灰色
- 按钮：绿色按钮

---

## 🔄 交互流程

### 页面加载

```
页面打开
    ↓
加载浏览历史列表
    ↓
显示记录卡片
    ↓
页面就绪
```

### Tab 切换

```
点击 Tabs 选项
    ↓
切换选中状态
    ↓
重新加载对应列表
    ↓
显示切换后的记录
```

### 查看记录

```
点击记录卡片
    ↓
跳转到内容详情页
    ↓
显示内容详情
```

### 删除单条记录

```
点击删除按钮
    ↓
显示确认对话框
    ↓
用户确认
    ↓
执行删除操作
    ↓
显示成功提示
    ↓
从列表中移除
```

### 清空所有记录

```
点击清空按钮
    ↓
显示确认对话框
    ↓
用户确认
    ↓
执行清空操作
    ↓
显示成功提示
    ↓
显示空状态
```

### 下拉刷新

```
用户下拉
    ↓
显示刷新动画
    ↓
重新加载历史列表
    ↓
隐藏刷新动画
    ↓
显示最新数据
```

### 上拉加载

```
用户滚动到底部
    ↓
显示加载动画
    ↓
加载更多历史
    ↓
隐藏加载动画
    ↓
追加显示新历史
```

---

## 📊 数据结构

### 记录对象

```typescript
interface Record {
  id: string                    // 记录 ID
  title: string                 // 内容标题
  image: string                 // 内容图片 URL
  type: 'house' | 'activity' | 'skill' | 'discussion'  // 内容类型
  time: string                  // 时间 (YYYY-MM-DD HH:mm)
  contentId: string             // 内容 ID（用于跳转）
}
```

### Mock 数据示例

```typescript
// 浏览历史
const mockHistories = [
  {
    id: '1',
    title: '乡村民宿出租',
    image: 'https://example.com/house.jpg',
    type: 'house',
    time: '2024-02-12 14:30',
    contentId: 'house-001'
  },
  {
    id: '2',
    title: '手工艺体验课程',
    image: 'https://example.com/activity.jpg',
    type: 'activity',
    time: '2024-02-12 10:15',
    contentId: 'activity-001'
  },
  {
    id: '3',
    title: '农产品销售',
    image: 'https://example.com/skill.jpg',
    type: 'skill',
    time: '2024-02-11 16:45',
    contentId: 'skill-001'
  }
]

// 收藏
const mockCollections = [
  {
    id: '1',
    title: '山区民宿',
    image: 'https://example.com/house2.jpg',
    type: 'house',
    time: '2024-02-10 09:20',
    contentId: 'house-002'
  },
  {
    id: '2',
    title: '农业技能分享',
    image: 'https://example.com/skill2.jpg',
    type: 'skill',
    time: '2024-02-09 15:30',
    contentId: 'skill-002'
  }
]
```

---

## 🎨 样式规范

### 颜色

| 元素 | 颜色 | 用途 |
|------|------|------|
| 背景 | `#F5F5F5` | 页面背景 |
| 卡片 | `#FFFFFF` | 历史卡片 |
| 标题 | `#212121` | 历史标题 |
| 时间 | `#BDBDBD` | 浏览时间 |
| 删除 | `#F44336` | 删除按钮 |

### 间距

```
页面内边距：16px
卡片间距：12px
卡片内边距：12px
```

### 圆角

```
卡片：8px
按钮：8px
图片：8px
```

---

## 🔧 技术实现

### 状态管理

```typescript
// 页面状态
const currentTab = ref(0)               // 当前选中的 Tab
const recordList = ref<Record[]>([])    // 记录列表
const loading = ref(false)              // 加载状态
const refreshing = ref(false)           // 刷新状态
const hasMore = ref(true)               // 是否有更多数据
const page = ref(1)                     // 当前页码
```

### 计算属性

```typescript
// 当前显示的记录列表
const currentRecords = computed(() => {
  if (currentTab.value === 0) {
    return mockHistories
  } else {
    return mockCollections
  }
})
```

### 方法

```typescript
// 加载记录列表
const loadRecords = async () => {
  loading.value = true
  try {
    // 模拟 API 调用
    await new Promise(resolve => setTimeout(resolve, 500))
    if (currentTab.value === 0) {
      recordList.value = mockHistories
    } else {
      recordList.value = mockCollections
    }
  } finally {
    loading.value = false
  }
}

// Tab 切换
const onTabChange = (index: number) => {
  currentTab.value = index
  page.value = 1
  recordList.value = []
  loadRecords()
}

// 删除单条记录
const deleteRecord = (recordId: string) => {
  if (typeof uni === 'undefined') {
    if (confirm('确定要删除这条记录吗？')) {
      recordList.value = recordList.value.filter(r => r.id !== recordId)
      alert('已删除')
    }
  } else {
    uni.showModal({
      title: '删除记录',
      content: '确定要删除这条记录吗？',
      success: (res) => {
        if (res.confirm) {
          recordList.value = recordList.value.filter(r => r.id !== recordId)
          uni.showToast({ title: '已删除', icon: 'success' })
        }
      }
    })
  }
}

// 清空所有记录
const clearAllRecords = () => {
  if (typeof uni === 'undefined') {
    if (confirm('确定要清空所有记录吗？')) {
      recordList.value = []
      alert('已清空')
    }
  } else {
    uni.showModal({
      title: '清空记录',
      content: '确定要清空所有记录吗？',
      success: (res) => {
        if (res.confirm) {
          recordList.value = []
          uni.showToast({ title: '已清空', icon: 'success' })
        }
      }
    })
  }
}

// 查看记录详情
const viewRecord = (record: Record) => {
  if (typeof uni === 'undefined') {
    alert(`查看详情: ${record.title}`)
  } else {
    uni.navigateTo({
      url: `/pages/detail/${record.type}/${record.contentId}`
    })
  }
}

// 下拉刷新
const onRefresh = async () => {
  refreshing.value = true
  try {
    page.value = 1
    await loadRecords()
  } finally {
    refreshing.value = false
  }
}

// 上拉加载
const onLoadMore = async () => {
  if (!hasMore.value || loading.value) return
  loading.value = true
  try {
    page.value++
    // 模拟加载更多
    await new Promise(resolve => setTimeout(resolve, 500))
  } finally {
    loading.value = false
  }
}

// 返回
const goBack = () => {
  if (typeof uni === 'undefined') {
    window.history.back()
  } else {
    uni.navigateBack()
  }
}
```

---

## 📱 响应式设计

### 小屏幕（< 576px）

- 卡片高度：80px
- 图片尺寸：60x60
- 字体缩小 10%
- 间距缩小 10%

### 中屏幕（576px - 768px）

- 卡片高度：100px
- 图片尺寸：80x80
- 标准字体
- 标准间距

### 大屏幕（> 768px）

- 卡片高度：120px
- 图片尺寸：100x100
- 字体放大 10%
- 间距放大 10%

---

## 🧪 测试清单

### 功能测试

- [ ] 页面加载正常
- [ ] 浏览历史列表显示正确
- [ ] 收藏列表显示正确
- [ ] Tabs 切换正常
- [ ] 下拉刷新正常
- [ ] 上拉加载正常
- [ ] 删除单条记录正常
- [ ] 清空所有记录正常
- [ ] 查看记录详情正常
- [ ] 空状态显示正确

### 界面测试

- [ ] 布局美观
- [ ] 文字清晰
- [ ] 颜色搭配
- [ ] 间距合理
- [ ] 卡片显示完整
- [ ] 按钮清晰可见

### 交互测试

- [ ] 返回按钮正常
- [ ] 清空按钮正常
- [ ] Tab 切换流畅
- [ ] 删除按钮正常
- [ ] 卡片点击响应
- [ ] 加载动画显示
- [ ] 刷新动画显示

### 兼容性测试

- [ ] 浏览器环境
- [ ] uni-app 环境
- [ ] 微信小程序
- [ ] 不同屏幕尺寸

---

## 📝 开发检查清单

- [ ] 页面结构完整
- [ ] 样式规范统一
- [ ] 数据绑定正确
- [ ] 交互流程清晰
- [ ] 错误处理完善
- [ ] 加载状态处理
- [ ] 空状态处理
- [ ] 响应式适配
- [ ] 代码注释完整
- [ ] 文档更新完整

---

**文档版本**：1.0.0  
**最后更新**：2026-02-12  
**维护者**：Kiro AI Assistant
