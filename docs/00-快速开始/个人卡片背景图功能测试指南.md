# 个人卡片背景图功能测试指南

## 📋 测试概述

本指南提供了个人卡片背景图功能的完整测试步骤和验证方法。

**测试环境**：浏览器 / uni-app / 微信小程序  
**测试时间**：约 15-20 分钟  
**测试难度**：简单  

---

## 🚀 快速开始

### 前置条件

- ✅ 项目已成功启动
- ✅ 用户卡片正常显示
- ✅ 浏览器开发者工具可用

### 测试环境准备

1. **浏览器环境**
   ```bash
   # 启动开发服务器
   npm run dev
   
   # 打开浏览器
   http://localhost:5173
   ```

2. **uni-app 环境**
   ```bash
   # 在 HBuilder 中运行
   # 或使用 CLI 启动
   npm run dev:mp-weixin
   ```

---

## 🧪 功能测试

### 测试 1：打开背景选择器

**步骤**：
1. 打开应用，进入用户中心页面
2. 查看用户卡片（顶部绿色卡片）
3. 点击卡片右上角的 "🎨 编辑背景" 按钮

**预期结果**：
- ✅ 模态框正常打开
- ✅ 显示"选择卡片背景"标题
- ✅ 显示关闭按钮（✕）
- ✅ 模态框内容完整显示

**验证**：
```
[ ] 模态框打开
[ ] 标题正确
[ ] 关闭按钮可见
[ ] 内容完整
```

---

### 测试 2：预设背景选择

**步骤**：
1. 打开背景选择器
2. 在"预设背景"区域看到 8 个背景选项
3. 依次点击每个背景选项

**预期结果**：
- ✅ 8 个背景都能正常显示
- ✅ 点击后该背景被选中（显示对勾 ✓）
- ✅ 预览区域实时更新显示选中的背景
- ✅ 背景名称在悬停时显示

**验证**：
```
[ ] 绿色渐变 - 选中正常
[ ] 蓝色渐变 - 选中正常
[ ] 紫色渐变 - 选中正常
[ ] 橙色渐变 - 选中正常
[ ] 红色渐变 - 选中正常
[ ] 深灰渐变 - 选中正常
[ ] 青色渐变 - 选中正常
[ ] 粉色渐变 - 选中正常
[ ] 预览实时更新
[ ] 背景名称显示
```

---

### 测试 3：自定义背景上传

**步骤**：
1. 打开背景选择器
2. 在"自定义背景"区域点击 "📁 选择图片" 按钮
3. 选择一张本地图片（JPG、PNG 或 WebP 格式）

**预期结果**：
- ✅ 文件选择器打开
- ✅ 图片加载成功
- ✅ 预览区域显示上传的图片
- ✅ 图片自动压缩处理

**验证**：
```
[ ] 文件选择器打开
[ ] 支持 JPG 格式
[ ] 支持 PNG 格式
[ ] 支持 WebP 格式
[ ] 图片加载成功
[ ] 预览显示正确
[ ] 图片自动压缩
```

---

### 测试 4：文件验证

**步骤**：
1. 打开背景选择器
2. 尝试上传不同类型的文件

**测试用例**：

#### 4.1 超大文件测试
- 尝试上传 > 500KB 的图片
- **预期**：显示错误提示 "文件过大，请选择小于 500KB 的文件"

```
[ ] 超大文件被拒绝
[ ] 错误提示显示
```

#### 4.2 不支持格式测试
- 尝试上传 GIF、BMP 等不支持的格式
- **预期**：显示错误提示 "不支持的文件格式，请选择 JPG、PNG 或 WebP 格式"

```
[ ] 不支持格式被拒绝
[ ] 错误提示显示
```

#### 4.3 有效文件测试
- 上传 < 500KB 的 JPG/PNG/WebP 文件
- **预期**：文件成功上传，预览显示

```
[ ] 有效文件接受
[ ] 预览显示正确
```

---

### 测试 5：预览效果

**步骤**：
1. 打开背景选择器
2. 选择不同的背景
3. 观察预览区域的变化

**预期结果**：
- ✅ 预览区域显示用户头像和昵称
- ✅ 背景效果正确显示
- ✅ 文字清晰可读
- ✅ 预览与实际效果一致

**验证**：
```
[ ] 预览显示头像
[ ] 预览显示昵称
[ ] 预览显示身份标签
[ ] 背景效果正确
[ ] 文字清晰可读
[ ] 预览与实际一致
```

---

### 测试 6：确认保存

**步骤**：
1. 打开背景选择器
2. 选择一个背景
3. 点击 "确认" 按钮

**预期结果**：
- ✅ 模态框关闭
- ✅ 用户卡片背景立即更新
- ✅ 新背景正确显示
- ✅ 背景保存成功

**验证**：
```
[ ] 模态框关闭
[ ] 卡片背景更新
[ ] 背景显示正确
[ ] 保存成功
```

---

### 测试 7：取消操作

**步骤**：
1. 打开背景选择器
2. 选择一个不同的背景
3. 点击 "取消" 按钮

**预期结果**：
- ✅ 模态框关闭
- ✅ 用户卡片背景不变
- ✅ 之前的背景保持不变

**验证**：
```
[ ] 模态框关闭
[ ] 卡片背景不变
[ ] 之前的背景保持
```

---

### 测试 8：持久化存储

**步骤**：
1. 选择一个背景并确认保存
2. 刷新页面（F5 或 Ctrl+R）
3. 观察用户卡片的背景

**预期结果**：
- ✅ 刷新后背景保持不变
- ✅ 选择的背景被正确保存
- ✅ 存储功能正常工作

**验证**：
```
[ ] 刷新后背景保持
[ ] 存储功能正常
[ ] 数据持久化成功
```

---

### 测试 9：多次切换

**步骤**：
1. 打开背景选择器
2. 依次选择多个不同的背景
3. 每次都点击确认保存
4. 观察卡片背景的变化

**预期结果**：
- ✅ 每次切换都成功
- ✅ 背景立即更新
- ✅ 没有延迟或卡顿
- ✅ 最后一次选择被保存

**验证**：
```
[ ] 第一次切换成功
[ ] 第二次切换成功
[ ] 第三次切换成功
[ ] 背景立即更新
[ ] 最后选择被保存
```

---

### 测试 10：关闭按钮

**步骤**：
1. 打开背景选择器
2. 点击模态框右上角的关闭按钮（✕）

**预期结果**：
- ✅ 模态框正常关闭
- ✅ 用户卡片背景不变
- ✅ 没有任何错误

**验证**：
```
[ ] 模态框关闭
[ ] 背景不变
[ ] 无错误
```

---

## 🖥️ 浏览器兼容性测试

### 测试浏览器

| 浏览器 | 版本 | 测试状态 | 备注 |
|--------|------|---------|------|
| Chrome | 最新 | [ ] | 推荐 |
| Firefox | 最新 | [ ] | 推荐 |
| Safari | 最新 | [ ] | 推荐 |
| Edge | 最新 | [ ] | 推荐 |

### 测试步骤

对每个浏览器执行以下步骤：

1. 打开应用
2. 进入用户中心
3. 点击编辑背景
4. 选择预设背景
5. 上传自定义图片
6. 确认保存
7. 刷新页面验证持久化

**预期结果**：所有功能在所有浏览器中都能正常工作

---

## 📱 跨平台测试

### 浏览器环境

```
[ ] 功能完整
[ ] 界面美观
[ ] 交互流畅
[ ] 无错误提示
```

### uni-app 环境

```
[ ] 功能完整
[ ] 界面美观
[ ] 交互流畅
[ ] 无错误提示
```

### 微信小程序

```
[ ] 功能完整
[ ] 界面美观
[ ] 交互流畅
[ ] 无错误提示
```

---

## 🐛 问题排查

### 常见问题

#### 问题 1：模态框不显示

**可能原因**：
- CSS 样式未加载
- z-index 冲突
- 组件未正确导入

**解决方案**：
1. 检查浏览器控制台是否有错误
2. 检查 CSS 是否正确加载
3. 检查组件导入是否正确

#### 问题 2：背景不更新

**可能原因**：
- 样式绑定失败
- 存储失败
- 组件未正确响应

**解决方案**：
1. 打开浏览器开发者工具
2. 检查 DOM 中的样式是否更新
3. 检查 localStorage 中的数据

#### 问题 3：图片上传失败

**可能原因**：
- 文件格式不支持
- 文件过大
- 浏览器权限问题

**解决方案**：
1. 检查文件格式（JPG/PNG/WebP）
2. 检查文件大小（< 500KB）
3. 检查浏览器权限设置

#### 问题 4：预览不显示

**可能原因**：
- 图片加载失败
- CSS 样式问题
- 浏览器兼容性问题

**解决方案**：
1. 检查图片是否正确加载
2. 检查 CSS 是否正确应用
3. 尝试其他浏览器

---

## 📊 测试报告模板

### 测试摘要

| 项目 | 结果 |
|------|------|
| 总测试数 | ___ |
| 通过数 | ___ |
| 失败数 | ___ |
| 通过率 | ___% |

### 测试结果

```
功能测试：[ ] 通过 [ ] 失败
浏览器兼容性：[ ] 通过 [ ] 失败
跨平台兼容性：[ ] 通过 [ ] 失败
性能测试：[ ] 通过 [ ] 失败
```

### 发现的问题

| 问题 | 严重程度 | 状态 |
|------|---------|------|
| | [ ] 高 [ ] 中 [ ] 低 | [ ] 待修复 |
| | [ ] 高 [ ] 中 [ ] 低 | [ ] 待修复 |
| | [ ] 高 [ ] 中 [ ] 低 | [ ] 待修复 |

### 测试人员

- 名称：_______________
- 日期：_______________
- 签名：_______________

---

## ✅ 测试完成清单

- [ ] 功能测试 1-10 全部通过
- [ ] 浏览器兼容性测试通过
- [ ] 跨平台兼容性测试通过
- [ ] 没有发现严重问题
- [ ] 测试报告已填写
- [ ] 所有问题已记录

---

## 📞 反馈和支持

如果在测试过程中遇到任何问题，请：

1. **记录问题**：详细描述问题现象
2. **收集信息**：浏览器版本、操作系统、错误信息
3. **提交反馈**：通过项目 Issue 或反馈渠道提交

---

## 📝 测试日志

### 测试日期：_____________

**测试人员**：_____________

**测试环境**：
- 浏览器：_____________
- 操作系统：_____________
- 网络环境：_____________

**测试结果**：
```
[ ] 全部通过
[ ] 部分通过
[ ] 全部失败
```

**发现的问题**：
```
1. _______________
2. _______________
3. _______________
```

**备注**：
```
_______________
_______________
_______________
```

---

**测试指南版本**：1.0.0  
**最后更新**：2026-02-12  
**维护者**：Kiro AI Assistant
