# main.js ä¿®å¤æŒ‡å— - è§£å†³é¡µé¢ç©ºç™½é—®é¢˜

## ğŸ¯ é—®é¢˜æè¿°

ä½ ç°åœ¨çœ‹åˆ°çš„æƒ…å†µï¼š
- âœ… é¡µé¢åŠ è½½æˆåŠŸ
- âœ… èœå•ç»“æ„æ˜¾ç¤ºæ­£ç¡®ï¼ˆæˆ‘çš„äº¤æ˜“ã€æˆ‘çš„å‘å¸ƒã€æˆ‘çš„è®°å½•ã€æœåŠ¡ä¸æ”¯æŒã€è®¾ç½®ï¼‰
- âŒ ä½†ç»„ä»¶å†…å®¹æ²¡æœ‰æ˜¾ç¤ºï¼ˆç©ºç™½ï¼‰
- âŒ æµè§ˆå™¨æ§åˆ¶å°å‡ºç°é”™è¯¯ï¼š`Uncaught SyntaxError: Identifier 'createSSRApp' has already been declared`

**åŸå› **ï¼š`main.js` ä¸­çš„ä»£ç è¢«é‡å¤å£°æ˜äº†ï¼ˆå¾ˆå¯èƒ½æ˜¯ç²˜è´´æ—¶æ²¡æœ‰å®Œå…¨æ¸…ç©ºåŸæœ‰ä»£ç ï¼‰

---

## ğŸ“ main.js æ–‡ä»¶ä½ç½®

**è·¯å¾„**ï¼š`HBuilderX é¡¹ç›®æ ¹ç›®å½•/src/main.js`

**å…·ä½“ä½ç½®**ï¼š
```
HBuilderX é¡¹ç›®/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js          â† å°±æ˜¯è¿™ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ components/
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

---

## ğŸ” å¦‚ä½•æ‰“å¼€ main.js

### æ–¹å¼ 1ï¼šåœ¨ HBuilderX ä¸­æ‰“å¼€ï¼ˆæ¨èï¼‰

```
1. åœ¨ HBuilderX å·¦ä¾§çš„é¡¹ç›®æ ‘ä¸­æ‰¾åˆ° src æ–‡ä»¶å¤¹
2. å±•å¼€ src æ–‡ä»¶å¤¹
3. æ‰¾åˆ° main.js æ–‡ä»¶
4. åŒå‡»æ‰“å¼€
```

### æ–¹å¼ 2ï¼šä½¿ç”¨æ–‡ä»¶ç®¡ç†å™¨æ‰“å¼€

```
1. æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
2. å¯¼èˆªåˆ° HBuilderX é¡¹ç›®çš„ src æ–‡ä»¶å¤¹
3. æ‰¾åˆ° main.js æ–‡ä»¶
4. å³é”® â†’ ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼ˆæˆ–ç”¨ VS Code æ‰“å¼€ï¼‰
```

---

## ğŸ“ main.js å½“å‰å†…å®¹

æ‰“å¼€ main.js åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ï¼ˆHBuilderX é»˜è®¤æ¨¡æ¿ï¼‰ï¼š

```javascript
import App from './App'
// #ifndef VUE3
import Vue from 'vue'
import './uni.promisify.adaptor'
Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
  ...App
})
app.$mount()
// #endif
// #ifdef VUE3
import { createSSRApp } from 'vue'
export function createApp() {
  const app = createSSRApp(App)
  return {
    app
  }
}
// #endif
```

**æ³¨æ„**ï¼š`#ifdef VUE3` å’Œ `#endif` æ˜¯æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œåªæœ‰ VUE3 éƒ¨åˆ†ä¼šè¢«æ‰§è¡Œã€‚

---

## âœï¸ ä¿®å¤æ­¥éª¤ï¼ˆå®Œå…¨é‡å†™ï¼‰

### ç¬¬ 1 æ­¥ï¼šå®Œå…¨æ¸…ç©º main.js

1. åœ¨ HBuilderX ä¸­æ‰“å¼€ `src/main.js` æ–‡ä»¶
2. æŒ‰ `Ctrl + A` é€‰ä¸­æ‰€æœ‰ä»£ç 
3. æŒ‰ `Delete` æˆ– `Backspace` åˆ é™¤æ‰€æœ‰å†…å®¹
4. **ç¡®ä¿æ–‡ä»¶å®Œå…¨ä¸ºç©º**ï¼ˆè¿™å¾ˆé‡è¦ï¼ï¼‰

### ç¬¬ 2 æ­¥ï¼šç²˜è´´æ­£ç¡®çš„ä»£ç 

å°†ä»¥ä¸‹ä»£ç å®Œæ•´åœ°ç²˜è´´åˆ°ç©ºçš„ `main.js` æ–‡ä»¶ä¸­ï¼š

```javascript
import App from './App'
import { createPinia } from 'pinia'

// #ifndef VUE3
import Vue from 'vue'
import './uni.promisify.adaptor'
Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
  ...App
})
app.$mount()
// #endif

// #ifdef VUE3
import { createSSRApp } from 'vue'
export function createApp() {
  const app = createSSRApp(App)
  
  // åˆå§‹åŒ– Pinia çŠ¶æ€ç®¡ç†
  app.use(createPinia())
  
  return {
    app
  }
}
// #endif
```

### ç¬¬ 3 æ­¥ï¼šä¿å­˜æ–‡ä»¶

1. æŒ‰ `Ctrl + S` ä¿å­˜æ–‡ä»¶
2. ç¡®ä¿ HBuilderX ä¸­ `main.js` æ ‡ç­¾é¡µæ²¡æœ‰å°åœ†ç‚¹ï¼ˆè¡¨ç¤ºå·²ä¿å­˜ï¼‰

---

## ğŸ“‹ å®Œæ•´çš„ä¿®æ”¹åçš„ main.js

ä¿®æ”¹å®Œæˆåï¼Œä½ çš„ `main.js` åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```javascript
import App from './App'
import { createPinia } from 'pinia'

// #ifndef VUE3
import Vue from 'vue'
import './uni.promisify.adaptor'
Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
  ...App
})
app.$mount()
// #endif

// #ifdef VUE3
import { createSSRApp } from 'vue'
export function createApp() {
  const app = createSSRApp(App)
  
  // åˆå§‹åŒ– Pinia çŠ¶æ€ç®¡ç†
  app.use(createPinia())
  
  return {
    app
  }
}
// #endif
```

**å…³é”®æ”¹åŠ¨**ï¼š
- âœ… åœ¨é¡¶éƒ¨æ·»åŠ  `import { createPinia } from 'pinia'`
- âœ… åœ¨ VUE3 éƒ¨åˆ†çš„ `createApp()` å‡½æ•°ä¸­æ·»åŠ  `app.use(createPinia())`
- âœ… ä¿æŒ `return { app }` çš„ç»“æ„ï¼ˆä¸è¦æ”¹æˆ `return app`ï¼‰

---

## ğŸ”§ ä¸´æ—¶æ–¹æ¡ˆï¼šä¸ä½¿ç”¨ Piniaï¼ˆå¦‚æœå‡ºç°å¯¼å…¥é”™è¯¯ï¼Œå…ˆç”¨è¿™ä¸ªï¼‰

å¦‚æœä½ é‡åˆ° `pinia` å¯¼å…¥é”™è¯¯ï¼ˆæ¯”å¦‚ `"" is not a function`ï¼‰ï¼Œè¯´æ˜ Pinia å¯èƒ½æ²¡æœ‰æ­£ç¡®å®‰è£…ã€‚å¯ä»¥å…ˆç”¨è¿™ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œä¸ä¾èµ– Piniaï¼š

### ç¬¬ 1 æ­¥ï¼šå®Œå…¨æ¸…ç©º main.js

1. åœ¨ HBuilderX ä¸­æ‰“å¼€ `src/main.js` æ–‡ä»¶
2. æŒ‰ `Ctrl + A` é€‰ä¸­æ‰€æœ‰ä»£ç 
3. æŒ‰ `Delete` åˆ é™¤æ‰€æœ‰å†…å®¹

### ç¬¬ 2 æ­¥ï¼šç²˜è´´ç®€åŒ–ç‰ˆä»£ç 

```javascript
import App from './App'

// #ifndef VUE3
import Vue from 'vue'
import './uni.promisify.adaptor'
Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
  ...App
})
app.$mount()
// #endif

// #ifdef VUE3
import { createSSRApp } from 'vue'
export function createApp() {
  const app = createSSRApp(App)
  return {
    app
  }
}
// #endif
```

### ç¬¬ 3 æ­¥ï¼šä¿å­˜å¹¶æµ‹è¯•

1. æŒ‰ `Ctrl + S` ä¿å­˜
2. æ¸…é™¤ç¼“å­˜ï¼ˆCtrl + Shift + Deleteï¼‰
3. åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰

**å¦‚æœè¿™ä¸ªç‰ˆæœ¬èƒ½æ­£å¸¸æ˜¾ç¤ºé¡µé¢**ï¼Œè¯´æ˜é—®é¢˜æ˜¯ Pinia çš„å®‰è£…é—®é¢˜ã€‚

---

## âœ… å®‰è£… Piniaï¼ˆå¦‚æœç®€åŒ–ç‰ˆèƒ½å·¥ä½œï¼‰

å¦‚æœä¸Šé¢çš„ç®€åŒ–ç‰ˆèƒ½æ­£å¸¸å·¥ä½œï¼Œå†æŒ‰ä»¥ä¸‹æ­¥éª¤å®‰è£… Piniaï¼š

### ç¬¬ 1 æ­¥ï¼šåœ¨ HBuilderX ç»ˆç«¯ä¸­å®‰è£… Pinia

æ‰“å¼€ HBuilderX çš„ç»ˆç«¯ï¼ˆèœå• â†’ å·¥å…· â†’ ç»ˆç«¯ï¼‰ï¼Œè¿è¡Œï¼š

```
npm install pinia
```

ç­‰å¾…å®‰è£…å®Œæˆã€‚

### ç¬¬ 2 æ­¥ï¼šä¿®æ”¹ main.js æ·»åŠ  Pinia

å®Œå…¨æ¸…ç©º `src/main.js`ï¼Œç„¶åç²˜è´´ä¸Šé¢"å®Œæ•´çš„ä¿®æ”¹åçš„ main.js"ä¸­çš„ä»£ç ã€‚

### ç¬¬ 3 æ­¥ï¼šä¿å­˜å¹¶æµ‹è¯•

1. æŒ‰ `Ctrl + S` ä¿å­˜
2. æ¸…é™¤ç¼“å­˜ï¼ˆCtrl + Shift + Deleteï¼‰
3. åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰

---

## ğŸ” è¯Šæ–­ Pinia å®‰è£…é—®é¢˜

### æ£€æŸ¥ 1ï¼šç¡®è®¤ pinia æ˜¯å¦å®‰è£…

åœ¨ HBuilderX ç»ˆç«¯ä¸­è¿è¡Œï¼š

```
npm list pinia
```

**å¦‚æœæ˜¾ç¤º**ï¼š
```
â””â”€â”€ pinia@x.x.x
```
è¯´æ˜å·²å®‰è£…ã€‚

**å¦‚æœæ˜¾ç¤ºé”™è¯¯æˆ–æ²¡æœ‰æ˜¾ç¤º pinia**ï¼Œè¯´æ˜æœªå®‰è£…ï¼Œéœ€è¦è¿è¡Œ `npm install pinia`ã€‚

### æ£€æŸ¥ 2ï¼šæŸ¥çœ‹ package.json

åœ¨ HBuilderX ä¸­æ‰“å¼€ `package.json` æ–‡ä»¶ï¼Œæ£€æŸ¥ `dependencies` ä¸­æ˜¯å¦æœ‰ `pinia`ï¼š

```json
"dependencies": {
  "pinia": "^2.x.x"
}
```

å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚

### æ£€æŸ¥ 3ï¼šé‡æ–°å®‰è£…ä¾èµ–

å¦‚æœè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå°è¯•é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š

```
npm install
```

ç„¶åå†åˆ·æ–°æµè§ˆå™¨ã€‚

---

##  åˆ·æ–°æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœ

ä¿å­˜åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ·æ–°ï¼ˆå¦‚æœå¯ç”¨äº†çƒ­æ›´æ–°ï¼‰ã€‚

å¦‚æœæ²¡æœ‰è‡ªåŠ¨åˆ·æ–°ï¼š

```
1. æŒ‰ F5 åˆ·æ–°æµè§ˆå™¨
2. æˆ–è€…æŒ‰ Ctrl + R åˆ·æ–°
3. æˆ–è€…æŒ‰ Ctrl + Shift + Delete æ¸…é™¤ç¼“å­˜åå†åˆ·æ–°
```

---

## âœ… éªŒè¯ä¿®å¤æ˜¯å¦æˆåŠŸ

åˆ·æ–°åï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] ç”¨æˆ·å¡ç‰‡æ˜¾ç¤ºï¼ˆç»¿è‰²æ¸å˜èƒŒæ™¯ï¼Œæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼‰
- [ ] æˆ‘çš„äº¤æ˜“åˆ—è¡¨æ˜¾ç¤ºæ•°æ®
- [ ] æˆ‘çš„å‘å¸ƒåˆ—è¡¨æ˜¾ç¤ºæ•°æ®
- [ ] æˆ‘çš„è®°å½•åˆ—è¡¨æ˜¾ç¤ºæ•°æ®
- [ ] æœåŠ¡ä¸æ”¯æŒæ˜¾ç¤ºå†…å®¹
- [ ] è®¾ç½®åˆ—è¡¨æ˜¾ç¤ºå†…å®¹
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ²¡æœ‰é”™è¯¯ï¼ˆæŒ‰ F12 æŸ¥çœ‹ï¼‰

---

## ğŸ› å¦‚æœè¿˜æ˜¯æœ‰é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

### æ£€æŸ¥ 1ï¼šç¡®è®¤æ–‡ä»¶å·²å®Œå…¨æ¸…ç©ºå¹¶æ­£ç¡®ç²˜è´´

```
1. æ‰“å¼€ HBuilderX ä¸­çš„ src/main.js
2. æ£€æŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦ä¸ä¸Šé¢çš„"å®Œæ•´çš„ä¿®æ”¹åçš„ main.js"å®Œå…¨ä¸€è‡´
3. ç‰¹åˆ«æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ä»£ç 
4. å¦‚æœæœ‰é‡å¤ï¼Œé‡æ–°æ‰§è¡Œ"ç¬¬ 1 æ­¥ï¼šå®Œå…¨æ¸…ç©º main.js"
```

### æ£€æŸ¥ 2ï¼šç¡®è®¤æ–‡ä»¶å·²ä¿å­˜

```
1. çœ‹ HBuilderX ä¸­ main.js æ ‡ç­¾é¡µæ˜¯å¦æœ‰å°åœ†ç‚¹
2. å°åœ†ç‚¹è¡¨ç¤ºæ–‡ä»¶æœªä¿å­˜
3. æŒ‰ Ctrl + S ä¿å­˜
```

### æ£€æŸ¥ 3ï¼šæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯

```
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. ç‚¹å‡» Console æ ‡ç­¾é¡µ
3. æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯
4. å¤åˆ¶å®Œæ•´çš„é”™è¯¯ä¿¡æ¯å‘Šè¯‰æˆ‘
```

### æ£€æŸ¥ 4ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜

```
1. æŒ‰ Ctrl + Shift + Delete æ‰“å¼€ç¼“å­˜æ¸…é™¤ç•Œé¢
2. é€‰æ‹©"æ‰€æœ‰æ—¶é—´"
3. å‹¾é€‰"Cookies å’Œå…¶ä»–ç½‘ç«™æ•°æ®"å’Œ"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
4. ç‚¹å‡»"æ¸…é™¤æ•°æ®"
5. å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µ
6. åœ¨ HBuilderX ä¸­é‡æ–°è¿è¡Œé¡¹ç›®
```

### æ£€æŸ¥ 5ï¼šç¡®è®¤ä¾èµ–å·²å®‰è£…

```
1. åœ¨ HBuilderX ç»ˆç«¯ä¸­è¿è¡Œï¼š
   npm list pinia
2. å¦‚æœæ˜¾ç¤º pinia å·²å®‰è£…ï¼Œè¯´æ˜æ²¡é—®é¢˜
3. å¦‚æœæ˜¾ç¤ºæœªå®‰è£…ï¼Œè¿è¡Œï¼š
   npm install pinia
```

### æ£€æŸ¥ 6ï¼šé‡å¯ HBuilderX

```
1. å…³é—­ HBuilderX
2. é‡æ–°æ‰“å¼€ HBuilderX
3. æ‰“å¼€é¡¹ç›®
4. å†æ¬¡æŸ¥çœ‹æµè§ˆå™¨æ•ˆæœ
```

---

## ğŸ“š ä¸ºä»€ä¹ˆéœ€è¦åˆå§‹åŒ– Piniaï¼Ÿ

Pinia æ˜¯ Vue 3 çš„çŠ¶æ€ç®¡ç†åº“ã€‚æˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨ Pinia æ¥ç®¡ç†ç”¨æˆ·ä¿¡æ¯ï¼š

```
ç”¨æˆ·ä¸­å¿ƒé¡µé¢
    â†“
ä½¿ç”¨ useUserStore() è·å–ç”¨æˆ·æ•°æ®
    â†“
Pinia çŠ¶æ€ç®¡ç†
    â†“
æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ã€è®¢å•ã€å‘å¸ƒç­‰æ•°æ®
```

å¦‚æœä¸åˆå§‹åŒ– Piniaï¼Œ`useUserStore()` å°±æ— æ³•å·¥ä½œï¼Œæ‰€ä»¥é¡µé¢æ˜¾ç¤ºä¸ºç©ºç™½ã€‚

---

## ğŸ¯ æ€»ç»“

**ä¿®å¤ main.js çš„ 3 ä¸ªæ­¥éª¤**ï¼š

1. å®Œå…¨æ¸…ç©º `src/main.js`ï¼ˆCtrl + Aï¼Œç„¶å Deleteï¼‰
2. ç²˜è´´æ­£ç¡®çš„ä»£ç ï¼ˆè§ä¸Šé¢çš„å®Œæ•´ä»£ç ï¼‰
3. ä¿å­˜æ–‡ä»¶ï¼ˆCtrl + Sï¼‰

**ç„¶å**ï¼š
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl + Shift + Deleteï¼‰
- åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰
- æŸ¥çœ‹æ•ˆæœ
- å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ’¡ å¿«é€Ÿå‚è€ƒ

| æ­¥éª¤ | æ“ä½œ |
|------|------|
| 1 | æ‰“å¼€ `src/main.js` |
| 2 | æŒ‰ Ctrl + A é€‰ä¸­æ‰€æœ‰ä»£ç  |
| 3 | æŒ‰ Delete åˆ é™¤æ‰€æœ‰ä»£ç  |
| 4 | ç²˜è´´æ­£ç¡®çš„ä»£ç ï¼ˆè§ä¸Šé¢ï¼‰ |
| 5 | ä¿å­˜æ–‡ä»¶ï¼ˆCtrl + Sï¼‰ |
| 6 | æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl + Shift + Deleteï¼‰ |
| 7 | åˆ·æ–°æµè§ˆå™¨ï¼ˆF5ï¼‰ |
| 8 | æŸ¥çœ‹æ•ˆæœ |

---

## ğŸš€ ç°åœ¨å°±å¼€å§‹ä¿®å¤å§ï¼

1. æ‰“å¼€ HBuilderX
2. æ‰“å¼€ `src/main.js`
3. æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ä¿®å¤
4. ä¿å­˜å¹¶åˆ·æ–°æµè§ˆå™¨
5. äº«å—å®Œæ•´çš„ç”¨æˆ·ä¸­å¿ƒåŠŸèƒ½ï¼

å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œå‘Šè¯‰æˆ‘é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®ä½ è§£å†³ï¼

