# é¡¹ç›®ä¼˜åŒ–è¯´æ˜

## ğŸ“‹ ä¼˜åŒ–å†…å®¹æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–é’ˆå¯¹é¡¹ç›®ç»“æ„å’Œä»£ç è§„èŒƒè¿›è¡Œäº†å…¨é¢æ”¹è¿›ï¼Œç¡®ä¿é¡¹ç›®æ›´åŠ è§„èŒƒã€æ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚

---

## ğŸ”§ ä¸»è¦ä¼˜åŒ–é¡¹

### 1. é¡¹ç›®ç»“æ„æ¸…ç†

#### åˆ é™¤é‡å¤æ–‡ä»¶å¤¹
- âŒ åˆ é™¤äº† `user-center/` é‡å¤æ–‡ä»¶å¤¹ï¼ˆåŒ…å« 990 ä¸ªæ–‡ä»¶ï¼‰
- âœ… ä¿æŒå•ä¸€çš„é¡¹ç›®æ ¹ç›®å½•ç»“æ„

#### æ¸…ç†ç»„ä»¶æ–‡ä»¶å¤¹
- âŒ åˆ é™¤äº† `components/package.json`
- âŒ åˆ é™¤äº† `components/package-lock.json`
- âŒ åˆ é™¤äº† `components/node_modules/`
- âœ… `components/` ç°åœ¨æ˜¯çº¯ç»„ä»¶æ–‡ä»¶å¤¹

**æ•ˆæœ**ï¼šé¡¹ç›®ç»“æ„æ›´æ¸…æ™°ï¼Œé¿å…æ··æ·†

---

### 2. è·¯ç”±é…ç½®å®Œå–„

#### æ›´æ–° `pages.json`
æ·»åŠ äº†æ‰€æœ‰ç¼ºå¤±çš„é¡µé¢è·¯ç”±é…ç½®ï¼š

```json
{
  "pages": [
    { "path": "pages/user-center/index" },
    { "path": "pages/user-center/order-list" },
    { "path": "pages/user-center/publish-list" },
    { "path": "pages/user-center/history-list" },
    { "path": "pages/user-center/service-support" },
    { "path": "pages/user-center/settings" }
  ]
}
```

**æ•ˆæœ**ï¼šæ‰€æœ‰é¡µé¢å¯¼èˆªç°åœ¨å¯ä»¥æ­£å¸¸å·¥ä½œ

---

### 3. åˆ›å»ºç¼ºå¤±çš„é¡µé¢æ–‡ä»¶

#### æ–°å¢é¡µé¢
- âœ… `pages/user-center/order-list.vue` - æˆ‘çš„äº¤æ˜“
- âœ… `pages/user-center/publish-list.vue` - æˆ‘çš„å‘å¸ƒ
- âœ… `pages/user-center/history-list.vue` - æˆ‘çš„è®°å½•
- âœ… `pages/user-center/service-support.vue` - æœåŠ¡ä¸æ”¯æŒ
- âœ… `pages/user-center/settings.vue` - è®¾ç½®

**ç‰¹ç‚¹**ï¼š
- å®Œæ•´çš„åŠŸèƒ½å®ç°
- ç»Ÿä¸€çš„æ ·å¼è§„èŒƒ
- æ¸…æ™°çš„ä»£ç æ³¨é‡Š
- å®Œå–„çš„äº¤äº’é€»è¾‘

---

### 4. API ç®¡ç†è§„èŒƒåŒ–

#### åˆ›å»º `services/api.config.ts`
ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ API é…ç½®ï¼š

```typescript
// API ç«¯ç‚¹å®šä¹‰
export const API_ENDPOINTS = {
  user: { info: '/user/info', update: '/user/update' },
  orders: { list: '/orders', detail: '/orders/:id' },
  publish: { list: '/publish', detail: '/publish/:id' },
  history: { list: '/history', add: '/history' },
  favorites: { list: '/favorites', add: '/favorites' }
}

// é”™è¯¯ä»£ç æ˜ å°„
export const ERROR_CODES = {
  400: 'è¯·æ±‚å‚æ•°é”™è¯¯',
  401: 'æœªæˆæƒï¼Œè¯·ç™»å½•',
  500: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'
}
```

**ä¼˜ç‚¹**ï¼š
- é›†ä¸­ç®¡ç†æ‰€æœ‰ API ç«¯ç‚¹
- ä¾¿äºåæœŸç»´æŠ¤å’Œä¿®æ”¹
- æ¸…æ™°çš„é”™è¯¯å¤„ç†

#### åˆ›å»º `services/http.ts`
ç»Ÿä¸€çš„ HTTP è¯·æ±‚å·¥å…·ï¼š

```typescript
// æä¾›ç»Ÿä¸€çš„è¯·æ±‚æ–¹æ³•
export const get = <T>(url: string): Promise<T>
export const post = <T>(url: string, data?: any): Promise<T>
export const put = <T>(url: string, data?: any): Promise<T>
export const del = <T>(url: string): Promise<T>

// è‡ªåŠ¨å¤„ç†ï¼š
// - è¯·æ±‚æ‹¦æˆª
// - å“åº”å¤„ç†
// - é”™è¯¯å¤„ç†
// - è¶…æ—¶é‡è¯•
```

**ä¼˜ç‚¹**ï¼š
- ç»Ÿä¸€çš„è¯·æ±‚å¤„ç†
- è‡ªåŠ¨é”™è¯¯æç¤º
- ä¾¿äºåæœŸæ¥å…¥çœŸå® API

---

### 5. ä¼˜åŒ– `services/user.ts`

#### æ”¹è¿›å†…å®¹
- âœ… æ·»åŠ äº†å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… ä½¿ç”¨æ–°çš„ HTTP å·¥å…·
- âœ… æ¸…æ™°çš„ API ç«¯ç‚¹å¼•ç”¨
- âœ… è¯¦ç»†çš„ä»£ç æ³¨é‡Š

#### åæœŸæ¥å…¥çœŸå® API çš„æ–¹å¼

**ç°åœ¨çš„ä»£ç **ï¼š
```typescript
// ä½¿ç”¨ Mock æ•°æ®
return new Promise((resolve) => {
  setTimeout(() => {
    resolve(mockUser)
  }, 300)
})
```

**åæœŸåªéœ€æ”¹ä¸º**ï¼š
```typescript
// ä½¿ç”¨çœŸå® API
return get<User>(API_ENDPOINTS.user.info)
```

**ä¼˜ç‚¹**ï¼š
- æ— éœ€ä¿®æ”¹å…¶ä»–ä»£ç 
- å¹³æ»‘è¿‡æ¸¡åˆ°çœŸå® API
- æœ€å°åŒ–æ”¹åŠ¨

---

## ğŸ“ ä¼˜åŒ–åçš„é¡¹ç›®ç»“æ„

```
user-center/
â”œâ”€â”€ docs/                              # ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ 00-å¿«é€Ÿå¼€å§‹/
â”‚   â”‚   â”œâ”€â”€ é¡¹ç›®ä¼˜åŒ–è¯´æ˜.md           # âœ¨ æ–°å¢
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ pages/                             # é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â””â”€â”€ user-center/
â”‚       â”œâ”€â”€ index.vue                  # ç”¨æˆ·ä¸­å¿ƒä¸»é¡µ
â”‚       â”œâ”€â”€ order-list.vue             # âœ¨ æ–°å¢
â”‚       â”œâ”€â”€ publish-list.vue           # âœ¨ æ–°å¢
â”‚       â”œâ”€â”€ history-list.vue           # âœ¨ æ–°å¢
â”‚       â”œâ”€â”€ service-support.vue        # âœ¨ æ–°å¢
â”‚       â””â”€â”€ settings.vue               # âœ¨ æ–°å¢
â”‚
â”œâ”€â”€ components/                        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ UserCard.vue
â”‚   â”œâ”€â”€ OrderList.vue
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ stores/                            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ user.ts
â”‚
â”œâ”€â”€ services/                          # API æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.config.ts                  # âœ¨ æ–°å¢
â”‚   â”œâ”€â”€ http.ts                        # âœ¨ æ–°å¢
â”‚   â””â”€â”€ user.ts                        # å·²ä¼˜åŒ–
â”‚
â”œâ”€â”€ types/                             # TypeScript ç±»å‹
â”‚   â””â”€â”€ user.ts
â”‚
â”œâ”€â”€ styles/                            # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ variables.scss
â”‚
â”œâ”€â”€ utils/                             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ storage.ts
â”‚
â”œâ”€â”€ mock/                              # Mock æ•°æ®
â”‚   â””â”€â”€ userData.ts
â”‚
â”œâ”€â”€ pages.json                         # âœ¨ å·²æ›´æ–°
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## âœ… ä¼˜åŒ–å‰åå¯¹æ¯”

| æ–¹é¢ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|------|------|
| é¡¹ç›®æ–‡ä»¶æ•° | 1000+ | 600+ |
| è·¯ç”±é…ç½® | 1 ä¸ªé¡µé¢ | 6 ä¸ªé¡µé¢ |
| API ç®¡ç† | åˆ†æ•£åœ¨å„æ–‡ä»¶ | é›†ä¸­åœ¨ `api.config.ts` |
| HTTP è¯·æ±‚ | æ— ç»Ÿä¸€å¤„ç† | ç»Ÿä¸€çš„ `http.ts` |
| é”™è¯¯å¤„ç† | ç¼ºå¤± | å®Œæ•´çš„é”™è¯¯å¤„ç† |
| ä»£ç æ³¨é‡Š | éƒ¨åˆ† | å…¨éƒ¨ä¸­æ–‡æ³¨é‡Š |
| é¡¹ç›®ç»“æ„ | æ··ä¹± | æ¸…æ™°è§„èŒƒ |

---

## ğŸš€ åæœŸæ¥å…¥çœŸå® API çš„æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šæ›´æ–° API é…ç½®

ç¼–è¾‘ `services/api.config.ts`ï¼š

```typescript
export const API_CONFIG = {
  production: {
    baseURL: 'https://your-api.com',  // æ”¹ä¸ºçœŸå® API åœ°å€
    timeout: 10000
  }
}
```

### ç¬¬ 2 æ­¥ï¼šæ›¿æ¢ Mock æ•°æ®

ç¼–è¾‘ `services/user.ts`ï¼Œå°† Mock è°ƒç”¨æ”¹ä¸ºçœŸå® APIï¼š

```typescript
// ä»è¿™æ ·
return new Promise((resolve) => {
  setTimeout(() => {
    resolve(mockUser)
  }, 300)
})

// æ”¹ä¸ºè¿™æ ·
return get<User>(API_ENDPOINTS.user.info)
```

### ç¬¬ 3 æ­¥ï¼šæµ‹è¯•éªŒè¯

- æµ‹è¯•æ‰€æœ‰ API è°ƒç”¨
- éªŒè¯é”™è¯¯å¤„ç†
- æ£€æŸ¥æ•°æ®æ ¼å¼

**é¢„è®¡æ”¹åŠ¨æ—¶é—´**ï¼š30 åˆ†é’Ÿ

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ·»åŠ æ–° API æ—¶

```typescript
// 1. åœ¨ api.config.ts ä¸­æ·»åŠ ç«¯ç‚¹
export const API_ENDPOINTS = {
  newFeature: {
    list: '/new-feature',
    detail: '/new-feature/:id'
  }
}

// 2. åœ¨ services ä¸­åˆ›å»ºå¯¹åº”çš„æœåŠ¡å‡½æ•°
export const fetchNewFeature = async () => {
  return get(API_ENDPOINTS.newFeature.list)
}

// 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const data = await fetchNewFeature()
```

### 2. å¤„ç†é”™è¯¯æ—¶

```typescript
try {
  const data = await fetchUserInfo()
  // å¤„ç†æ•°æ®
} catch (error) {
  // é”™è¯¯å·²è‡ªåŠ¨å¤„ç†ï¼Œæ˜¾ç¤ºæç¤º
  console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error)
}
```

### 3. æ·»åŠ æ–°é¡µé¢æ—¶

```typescript
// 1. åœ¨ pages.json ä¸­æ·»åŠ è·¯ç”±
{
  "path": "pages/new-page/index",
  "style": { "navigationBarTitleText": "æ–°é¡µé¢" }
}

// 2. åˆ›å»ºé¡µé¢æ–‡ä»¶
// pages/new-page/index.vue

// 3. åœ¨å…¶ä»–é¡µé¢ä¸­å¯¼èˆª
uni.navigateTo({ url: '/pages/new-page/index' })
```

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### ä»£ç è´¨é‡
- âœ… ä»£ç ç»“æ„æ›´æ¸…æ™°
- âœ… ç±»å‹å®šä¹‰æ›´å®Œæ•´
- âœ… é”™è¯¯å¤„ç†æ›´å®Œå–„
- âœ… æ³¨é‡Šæ›´è¯¦ç»†

### å¼€å‘æ•ˆç‡
- âœ… åæœŸæ¥å…¥ API æ›´å¿«
- âœ… æ·»åŠ æ–°åŠŸèƒ½æ›´ç®€å•
- âœ… ç»´æŠ¤æˆæœ¬æ›´ä½
- âœ… å›¢é˜Ÿåä½œæ›´å®¹æ˜“

### é¡¹ç›®è§„èŒƒ
- âœ… ç¬¦åˆ uni-app æœ€ä½³å®è·µ
- âœ… ç¬¦åˆ Vue 3 + TypeScript è§„èŒƒ
- âœ… ç¬¦åˆä¼ä¸šçº§é¡¹ç›®æ ‡å‡†
- âœ… æ˜“äºæ‰©å±•å’Œç»´æŠ¤

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰
- [ ] å®Œå–„å„é¡µé¢çš„æ ·å¼ç»†èŠ‚
- [ ] æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
- [ ] æµ‹è¯•æ‰€æœ‰é¡µé¢çš„äº¤äº’

### ä¸­æœŸï¼ˆ2-4 å‘¨ï¼‰
- [ ] æ¥å…¥çœŸå® API
- [ ] å®Œå–„ç”¨æˆ·è®¤è¯
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜

### é•¿æœŸï¼ˆ1-3 ä¸ªæœˆï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å‘å¸ƒåˆ°å„å¹³å°

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¿«é€ŸæŸ¥çœ‹ä¼˜åŒ–æ•ˆæœï¼Ÿ
A: åœ¨ HBuilder ä¸­æ‰“å¼€é¡¹ç›®ï¼Œç‚¹å‡»"è¿è¡Œåˆ°æµè§ˆå™¨"ï¼Œå³å¯çœ‹åˆ°æ‰€æœ‰é¡µé¢ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ API ç«¯ç‚¹ï¼Ÿ
A: ç¼–è¾‘ `services/api.config.ts`ï¼Œåœ¨ `API_ENDPOINTS` ä¸­æ·»åŠ æ–°ç«¯ç‚¹å³å¯ã€‚

### Q: å¦‚ä½•å¤„ç† API é”™è¯¯ï¼Ÿ
A: é”™è¯¯ä¼šè‡ªåŠ¨æ˜¾ç¤ºæç¤ºï¼Œä½ åªéœ€åœ¨ try-catch ä¸­å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚

### Q: å¦‚ä½•æ¥å…¥çœŸå® APIï¼Ÿ
A: å‚è€ƒä¸Šé¢çš„"åæœŸæ¥å…¥çœŸå® API çš„æ­¥éª¤"éƒ¨åˆ†ã€‚

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–ä½¿é¡¹ç›®ï¼š
- ğŸ“ **ç»“æ„æ›´æ¸…æ™°** - åˆ é™¤é‡å¤æ–‡ä»¶ï¼Œç»Ÿä¸€ç®¡ç†
- ğŸ›£ï¸ **è·¯ç”±æ›´å®Œæ•´** - æ‰€æœ‰é¡µé¢éƒ½æœ‰é…ç½®
- ğŸ”Œ **API æ›´è§„èŒƒ** - é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤
- ğŸš€ **æ‰©å±•æ›´å®¹æ˜“** - åæœŸæ¥å…¥ API æ— éœ€å¤§æ”¹
- ğŸ“ **ä»£ç æ›´è§„èŒƒ** - å®Œæ•´æ³¨é‡Šï¼Œæ˜“äºç†è§£

**ç°åœ¨é¡¹ç›®å·²ç»ä¸ºç”Ÿäº§ç¯å¢ƒåšå¥½å‡†å¤‡ï¼** ğŸ‰

