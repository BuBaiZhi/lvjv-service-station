<view class="post-card" bindtap="onTap">
  <!-- ç½®é¡¶æ ‡è¯† -->
  <view class="pin-badge" wx:if="{{post.isPinned}}">ğŸ“Œ ç½®é¡¶</view>
  
  <!-- ä½œè€…ä¿¡æ¯ -->
  <view class="author-info" bindtap="onAuthorTap" data-author-id="{{post.author.id}}">
    <image class="avatar" src="{{post.author.avatar}}" mode="aspectFill"></image>
    <view class="author-detail">
      <view class="author-name">
        <text>{{post.author.name}}</text>
        <identity-badge identity="{{post.author.identity}}"></identity-badge>
        <text class="author-level" wx:if="{{post.author.level}}">Lv.{{post.author.level}}</text>
      </view>
      <view class="post-time">
        <text class="time-text">{{formatTime(post.time)}}</text>
        <text class="location-tag" wx:if="{{post.location}}">Â· {{post.location}}</text>
      </view>
    </view>
  </view>
  
  <!-- å¸–å­ç±»å‹æ ‡ç­¾ - ä½¿ç”¨ data-type å±æ€§ -->
  <view class="post-type" wx:if="{{post.type}}">
    <text class="type-tag" data-type="{{post.type}}"># {{post.type}}</text>
  </view>
  
  <!-- æ ‡é¢˜ -->
  <view class="post-title" wx:if="{{post.title}}">
    {{post.title}}
  </view>
  
  <!-- æ­£æ–‡ -->
  <view class="post-content {{post.isExpand ? 'expand' : ''}}">
    {{post.content}}
  </view>
  
  <!-- å›¾ç‰‡åˆ—è¡¨ - ä¹å®«æ ¼ -->
  <view class="image-grid grid-{{post.images ? post.images.length : 0}}" wx:if="{{post.images && post.images.length > 0}}">
    <block wx:for="{{post.images}}" wx:key="index">
      <view class="grid-item" wx:if="{{index < 9}}">
        <image 
          class="grid-image" 
          src="{{item}}" 
          mode="aspectFill"
          bindtap="previewImage"
          data-index="{{index}}"
          data-images="{{post.images}}"
        ></image>
        <view class="image-count" wx:if="{{index === 8 && post.images.length > 9}}">
          +{{post.images.length - 9}}
        </view>
      </view>
    </block>
  </view>
  
  <!-- æ ‡ç­¾åˆ—è¡¨ -->
  <view class="tags-container" wx:if="{{post.tags && post.tags.length > 0}}">
    <block wx:for="{{post.tags}}" wx:key="index">
      <text class="tag-item">#{{item}}</text>
    </block>
  </view>
  
  <!-- äº’åŠ¨ç»Ÿè®¡ -->
  <view class="stats-bar">
    <view class="stat-item">
      <text class="stat-icon">ğŸ‘ï¸</text>
      <text class="stat-count">{{formatNumber(post.views || 0)}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-icon">â¤ï¸</text>
      <text class="stat-count">{{formatNumber(post.likes || 0)}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-icon">ğŸ’¬</text>
      <text class="stat-count">{{formatNumber(post.comments || 0)}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-icon">â­</text>
      <text class="stat-count">{{formatNumber(post.collects || 0)}}</text>
    </view>
  </view>
  
  <!-- äº’åŠ¨æ  -->
  <view class="interaction-bar">
    <view class="interaction-item {{post.isLiked ? 'active' : ''}}" bindtap="onLike" catchtap>
      <text class="icon">{{post.isLiked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      <text class="text">{{post.isLiked ? 'å·²ç‚¹èµ' : 'ç‚¹èµ'}}</text>
    </view>
    <view class="interaction-item" bindtap="onComment" catchtap>
      <text class="icon">ğŸ’¬</text>
      <text class="text">è¯„è®º</text>
    </view>
    <view class="interaction-item {{post.isCollected ? 'active' : ''}}" bindtap="onCollect" catchtap>
      <text class="icon">{{post.isCollected ? 'â­' : 'â˜†'}}</text>
      <text class="text">{{post.isCollected ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
    </view>
    <view class="interaction-item" bindtap="onShare" catchtap>
      <text class="icon">â†—ï¸</text>
      <text class="text">åˆ†äº«</text>
    </view>
  </view>
</view>