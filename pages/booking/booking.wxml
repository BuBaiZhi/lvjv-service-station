<view class="container">
  <!-- æˆ¿æºä¿¡æ¯å¡ç‰‡ -->
  <view class="house-card">
    <image class="house-image" src="{{house.image}}" mode="aspectFill"></image>
    <view class="house-info">
      <text class="house-title">{{house.title}}</text>
      <text class="house-location">{{house.location}}</text>
      <view class="house-price">
        <text class="price">Â¥{{house.price}}</text>
        <text class="unit">/{{house.unit}}</text>
      </view>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å…¥ä½æ—¥æœŸ</text>
    </view>
    <view class="date-selector">
      <view class="date-item" bindtap="showCalendar" data-type="checkIn">
        <text class="date-label">å…¥ä½</text>
        <text class="date-value">{{checkIn || 'è¯·é€‰æ‹©'}}</text>
      </view>
      <text class="date-arrow">â†’</text>
      <view class="date-item" bindtap="showCalendar" data-type="checkOut">
        <text class="date-label">ç¦»åº—</text>
        <text class="date-value">{{checkOut || 'è¯·é€‰æ‹©'}}</text>
      </view>
    </view>
  </view>

  <!-- äººæ•°é€‰æ‹© -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">å…¥ä½äººæ•°</text>
    </view>
    <view class="guest-selector">
      <view class="guest-item">
        <text class="guest-label">æˆäºº</text>
        <view class="guest-control">
          <text class="control-btn" bindtap="decreaseAdults">-</text>
          <text class="guest-count">{{adults}}</text>
          <text class="control-btn" bindtap="increaseAdults">+</text>
        </view>
      </view>
      <view class="guest-item">
        <text class="guest-label">å„¿ç«¥</text>
        <view class="guest-control">
          <text class="control-btn" bindtap="decreaseChildren">-</text>
          <text class="guest-count">{{children}}</text>
          <text class="control-btn" bindtap="increaseChildren">+</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»·æ ¼æ˜ç»† -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">ä»·æ ¼æ˜ç»†</text>
    </view>
    <view class="price-detail">
      <view class="price-row">
        <text>Â¥{{house.price}} Ã— {{nights}}æ™š</text>
        <text>Â¥{{subtotal}}</text>
      </view>
      <view class="price-row">
        <text>å¹³å°æœåŠ¡è´¹</text>
        <text>Â¥{{serviceFee}}</text>
      </view>
      <view class="price-row total">
        <text>æ€»è®¡</text>
        <text>Â¥{{total}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="bottom-left">
      <text class="total-price">Â¥{{total}}</text>
      <text class="total-desc">æ€»ä»·</text>
    </view>
    <button class="book-btn" bindtap="onBook">ç«‹å³é¢„è®¢</button>
  </view>

  <!-- æ—¥å†å¼¹çª— -->
  <view class="calendar-modal" wx:if="{{showCalendar}}">
    <view class="modal-mask" bindtap="hideCalendar"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">é€‰æ‹©{{calendarType === 'checkIn' ? 'å…¥ä½' : 'ç¦»åº—'}}æ—¥æœŸ</text>
        <text class="close-btn" bindtap="hideCalendar">âœ•</text>
      </view>
      <view class="modal-body">
        <picker-view 
          class="calendar-picker" 
          value="{{datePickerValue}}"
          bindchange="onDateChange"
          indicator-style="height: 80rpx;"
        >
          <picker-view-column>
            <view wx:for="{{years}}" wx:key="index" class="picker-item">{{item}}å¹´</view>
          </picker-view-column>
          <picker-view-column>
            <view wx:for="{{months}}" wx:key="index" class="picker-item">{{item}}æœˆ</view>
          </picker-view-column>
          <picker-view-column>
            <view wx:for="{{days}}" wx:key="index" class="picker-item">{{item}}æ—¥</view>
          </picker-view-column>
        </picker-view>
      </view>
      <view class="modal-footer">
        <button class="confirm-btn" bindtap="confirmDate">ç¡®å®š</button>
      </view>
    </view>
  </view>

  <!-- æ”¯ä»˜å¼¹çª— -->
  <view class="payment-modal" wx:if="{{showPayment}}">
    <view class="modal-mask" bindtap="closePayment"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">ç¡®è®¤æ”¯ä»˜</text>
        <text class="close-btn" bindtap="closePayment">âœ•</text>
      </view>
      <view class="modal-body">
        <view class="payment-info">
          <text class="payment-label">è®¢å•é‡‘é¢</text>
          <text class="payment-amount">Â¥{{total}}</text>
        </view>
        <view class="payment-methods">
          <view class="payment-method active">
            <text class="method-icon">ğŸ’³</text>
            <text class="method-name">å¾®ä¿¡æ”¯ä»˜</text>
            <text class="method-check">âœ“</text>
          </view>
        </view>
      </view>
      <view class="modal-footer">
        <button class="confirm-pay-btn" bindtap="onConfirmPay">ç¡®è®¤æ”¯ä»˜ Â¥{{total}}</button>
      </view>
    </view>
  </view>
</view>