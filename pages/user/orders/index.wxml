<!-- æˆ‘çš„äº¤æ˜“é¡µé¢ -->
<view class="page" data-theme="{{theme}}" data-elder="{{elderMode}}">
  <!-- å¯¼èˆªæ  -->
  <view class="page-header">
    <text class="back-btn" bindtap="goBack">â€¹ è¿”å›</text>
  </view>

  <!-- æ ‡ç­¾æ  -->
  <view class="tabs">
    <view 
      class="tab-item {{activeTab === 'all' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="all">
      å…¨éƒ¨
    </view>

    <view 
      class="tab-item {{activeTab === 'pending' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="pending">
      å¾…ç¡®è®¤
    </view>

    <view 
      class="tab-item {{activeTab === 'ongoing' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="ongoing">
      è¿›è¡Œä¸­
    </view>

    <view 
      class="tab-item {{activeTab === 'completed' ? 'active' : ''}}"
      bindtap="switchTab"
      data-tab="completed">
      å·²å®Œæˆ
    </view>
  </view>

  <!-- ç±»å‹ç­›é€‰ -->
  <view class="filter-bar">
    <view class="filter-btn" bindtap="toggleTypeFilter">
      {{ typeFilter === 'all' ? 'å…¨éƒ¨ç±»å‹' :
         typeFilter === 'house' ? 'æ°‘å®¿' :
         typeFilter === 'skill' ? 'æŠ€èƒ½' :
         typeFilter === 'activity' ? 'æ´»åŠ¨' :
         'äºŒæ‰‹ç‰©å“' }}
      <text class="arrow {{typeFilterShow ? 'up' : ''}}">â–¼</text>
    </view>
  </view>

  <!-- ä¸‹æ‹‰é®ç½© -->
  <view wx:if="{{typeFilterShow}}" class="mask" bindtap="closeTypeFilter">
    <view class="dropdown" catchtap="noop">
      <view 
        class="dropdown-item {{typeFilter === item.value ? 'active' : ''}}"
        wx:for="{{typeOptions}}"
        wx:key="value"
        data-type="{{item.value}}"
        bindtap="toggleTypeFilter">
        {{item.label}}
      </view>
    </view>
  </view>

  <!-- å†…å®¹ -->
  <view class="content">
    <view 
      class="order-card"
      wx:for="{{filteredList}}"
      wx:key="id"
      bindtap="viewOrderDetail"
      data-id="{{item.id}}"
    >
      <view class="order-header">
        <text class="order-type">{{item.type === 'house' ? 'æ°‘å®¿' : item.type === 'skill' ? 'æŠ€èƒ½' : item.type === 'activity' ? 'æ´»åŠ¨' : 'äºŒæ‰‹ç‰©å“'}}</text>
        <text class="order-status {{item.status}}">{{item.statusText}}</text>
      </view>
      
      <view class="order-content">
        <image class="order-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="order-info">
          <text class="order-title">{{item.title}}</text>
          <text class="order-date">{{item.date}}</text>
          <text class="order-price">Â¥{{item.price}}</text>
        </view>
      </view>

      <view class="order-footer" catchtap="noop">
        <button class="btn-secondary" size="mini" catchtap="contactSeller" data-id="{{item.id}}">è”ç³»å¯¹æ–¹</button>
        <button class="btn-primary" size="mini" catchtap="viewOrderDetail" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{filteredList.length === 0}}">
      <text class="empty-icon">ğŸ“¦</text>
      <text class="empty-text">æš‚æ— è®¢å•</text>
    </view>
  </view>

</view>
