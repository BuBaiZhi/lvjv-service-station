<!--æˆ¿æºæœç´¢é¡µé¢-->
<view class="search-page {{theme}} {{elderMode ? 'elder-mode' : ''}}">
  <!-- æœç´¢æ¡† -->
  <view class="search-header">
    <view class="search-input-wrap">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢ç›®çš„åœ°ã€æˆ¿æºåç§°" 
        value="{{keyword}}"
        bindinput="onInput"
        confirm-type="search"
        bindconfirm="onSearch"
      />
      <text class="clear-btn" wx:if="{{keyword}}" bindtap="clearInput">âœ•</text>
    </view>
    <text class="cancel-btn" bindtap="onCancel">å–æ¶ˆ</text>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{results.length > 0}}">
    <view class="result-item" wx:for="{{results}}" wx:key="_id" bindtap="onHouseTap" data-id="{{item._id}}">
      <image class="result-image" src="{{item.image}}" mode="aspectFill"></image>
      <view class="result-info">
        <text class="result-title">{{item.title}}</text>
        <text class="result-location">{{item.location}}</text>
        <text class="result-price">Â¥{{item.price}}/{{item.unit || 'å¤©'}}</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å†å² -->
  <view class="search-history" wx:if="{{history.length > 0 && results.length === 0 && !keyword}}">
    <view class="section-header">
      <text class="section-title">æœç´¢å†å²</text>
      <text class="clear-history" bindtap="clearHistory">æ¸…ç©º</text>
    </view>
    <view class="history-tags">
      <text class="history-tag" wx:for="{{history}}" wx:key="*this" bindtap="onHistoryTap" data-keyword="{{item}}">{{item}}</text>
    </view>
  </view>

  <!-- çƒ­é—¨æœç´¢ -->
  <view class="hot-search" wx:if="{{results.length === 0 && !keyword}}">
    <view class="section-header">
      <text class="section-title">çƒ­é—¨æœç´¢</text>
    </view>
    <view class="hot-tags">
      <text class="hot-tag" wx:for="{{hotKeywords}}" wx:key="*this" bindtap="onHotTap" data-keyword="{{item}}">{{item}}</text>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æœç´¢ä¸­...</text>
  </view>

  <!-- æ— ç»“æœ -->
  <view class="no-result" wx:if="{{keyword && results.length === 0 && !loading}}">
    <text class="no-result-icon">ğŸ”</text>
    <text class="no-result-text">æœªæ‰¾åˆ°ç›¸å…³æˆ¿æº</text>
  </view>
</view>
