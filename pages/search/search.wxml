<view class="container">
  <!-- æœç´¢æ¡† -->
  <view class="search-header">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢ç›®çš„åœ°ã€ç¤¾åŒºåç§°"
        bindinput="onInput"
        value="{{keyword}}"
        confirm-type="search"
        bindconfirm="onSearch"
        auto-focus
      ></input>
      <text class="clear-btn" wx:if="{{keyword}}" bindtap="clearInput">âœ•</text>
    </view>
    <text class="cancel-btn" bindtap="onCancel">å–æ¶ˆ</text>
  </view>

  <!-- æœç´¢ç­›é€‰æ  -->
  <scroll-view class="filter-bar" scroll-x show-scrollbar="{{false}}" wx:if="{{keyword}}">
    <view class="filter-list">
      <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-filter="all">å…¨éƒ¨</view>
      <view class="filter-item {{currentFilter === 'house' ? 'active' : ''}}" bindtap="setFilter" data-filter="house">æˆ¿æº</view>
      <view class="filter-item {{currentFilter === 'location' ? 'active' : ''}}" bindtap="setFilter" data-filter="location">ä½ç½®</view>
    </view>
  </scroll-view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{keyword}}">
    <!-- æˆ¿æºç»“æœ -->
    <view class="result-section" wx:if="{{filteredHouses.length > 0 && (currentFilter === 'all' || currentFilter === 'house')}}">
      <view class="section-header">
        <text class="section-title">æˆ¿æº</text>
        <text class="section-count">{{filteredHouses.length}}ä¸ªç»“æœ</text>
      </view>
      <view class="house-item" wx:for="{{filteredHouses}}" wx:key="id" bindtap="onHouseTap" data-id="{{item._id}}">
        <image class="house-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="house-info">
          <text class="house-title">{{item.title}}</text>
          <text class="house-location">ğŸ“ {{item.location}}</text>
          <view class="house-price">
            <text class="price">Â¥{{item.price}}</text>
            <text class="unit">/{{item.unit}}</text>
          </view>
          <view class="house-tags">
            <text class="tag" wx:for="{{item.tags}}" wx:key="*this">#{{item}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ— ç»“æœ -->
    <view class="no-result" wx:if="{{filteredHouses.length === 0}}">
      <text class="no-result-icon">ğŸ”</text>
      <text class="no-result-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æˆ¿æº</text>
      <text class="no-result-subtext">è¯•è¯•å…¶ä»–å…³é”®è¯å§</text>
    </view>
  </view>

  <!-- æœç´¢å†å² -->
  <view class="search-history" wx:else>
    <view class="history-header">
      <text class="history-title">æœç´¢å†å²</text>
      <text class="clear-history" bindtap="clearHistory">æ¸…ç©º</text>
    </view>
    <view class="history-list">
      <text class="history-item" wx:for="{{history}}" wx:key="index" bindtap="onHistoryTap" data-keyword="{{item}}">{{item}}</text>
    </view>
    
    <!-- çƒ­é—¨æœç´¢ -->
    <view class="hot-section">
      <text class="hot-title">çƒ­é—¨æœç´¢</text>
      <view class="hot-list">
        <text class="hot-item" wx:for="{{hotKeywords}}" wx:key="index" bindtap="onHotTap" data-keyword="{{item}}">{{item}}</text>
      </view>
    </view>

    <!-- çƒ­é—¨ç›®çš„åœ°æ¨è -->
    <view class="hot-destinations">
      <text class="hot-title">çƒ­é—¨ç›®çš„åœ°</text>
      <view class="destination-grid">
        <view class="destination-item" wx:for="{{hotDestinations}}" wx:key="index" bindtap="onDestinationTap" data-keyword="{{item}}">
          <text class="destination-name">{{item}}</text>
        </view>
      </view>
    </view>
  </view>
</view>